[["index.html", "Rでやるランダムフォレスト はじめに", " Rでやるランダムフォレスト Akiru Kato 2023-03-12 はじめに R（tidymodels）でrangerのランダムフォレストを使ってみます "],["intro.html", "Chapter 1 Introduction 1.1 rangerのランダムフォレストについて 1.2 ハイパーパラメータ 1.3 その他の引数", " Chapter 1 Introduction ランダムフォレストは Breiman (2001) で提案された教師あり学習の手法です。 集団学習（ensemble learning, アンサンブル学習）のなかでもバギングと呼ばれるやつで、複数の弱学習器（決定木）を組み合わせています。 ランダムフォレストは次のような特徴があるとされていて、とくに2010年代前半ごろまでよく使われていました。 過学習が起こりにくいとされ、扱いやすい 高次元だったり、相関があったりするデータでもわりと大丈夫1 欠損値がある・不均衡なデータでもわりと大丈夫2 木をつくるのは並列実行できるので、速い 変数重要度を確認できる 現在では勾配ブースティング系のアルゴリズムのほうが強力なので、以前のようには使われませんが、高次元のデータでも使えてそれなりに速く、変数重要度を確認できるため、とりあえずランダムフォレストに突っ込んで特徴量選択するみたいな使い方ができるようです。 1.1 rangerのランダムフォレストについて この資料では、tidymodelsからrangerのランダムフォレストを使います。 parsnip::rand_forestでは、以下のエンジンを使用することができます。デフォルトでは、rangerのランダムフォレストが使用されます。 ranger aorsf h2o randomForest spark Wright and Ziegler (2017) は、randomForestよりも後発の実装です。同じくらいの時期に発表されたRboristという実装もありましたが、そちらは使えないようです。 1.2 ハイパーパラメータ parsnip::rand_forestの各エンジンに共通するハイパーパラメータは次の３つです。 mtry（木を作成するときに使う特徴量の数） trees（作成する木の数） min_n（ノードサイズの下限値） tidymodelsの枠組みのなかでは、mtryとtreesを調整します。 1.2.1 mtry（木を作成するときに使う特徴量の数） mtryです。scikit-learnにおけるmax_featuresのようなものですが、max_featuresとは異なり、それぞれの木をつくるときに使用する特徴量の数をintegerで直接指定します。 mtryのデフォルト値はfloor(sqrt(ncol(x)))となっています。ranger::rangerでは引数を受け取ってinteger scalarを返す関数を指定してもよいことになっていますが、tidymodelsのなかではintegerしか指定できません。 1.2.2 trees（作成する木の数） num.treesです。scikit-learnにおけるn_estimatorsにあたります。 デフォルト値は500Lになっています。 treesは大きいほうが精度が上がりますが、そのぶん学習にかかる時間も増えます。また、十分に大きくすると、それ以上大きくしてもあまり性能が改善しなくなるため、ふつうは適度な大きさで決め打ちします。 1.2.3 min_n（ノードサイズの下限値） min.node.sizeです。scikit-learnにおけるmin_samples_splitのようなものです。 デフォルト値は分類の場合は1L、回帰の場合は5Lです。 min_nについては、max.depth=NULLの場合、最小ノードサイズを1にしたときによい結果が得られやすいとされています（1.11. Ensemble methods — scikit-learn 1.2.2 documentation）。ただし、そのぶん過学習は起こりやすくなります。また、一つ一つの木が深くなると学習に時間がかかるようになるため、速く学習を終わらせたいときには、この値を大きくして調整します。 1.3 その他の引数 ranger::rangerの引数はたくさんありますが、ハイパーパラメータは上の3つなので、他の引数についてはあまり触る機会はないです。 1.3.1 importance 変数重要度を出したい場合、impurityやpermutationを指定します。 なお、impurityベースの変数重要度については注意して使いましょうという議論もあります。 1.3.2 num.threads ranger::rangerはデフォルトでは利用可能なCPUコア数と同じ数のスレッドを使用しますが、parsnipのヘルプによると、parsnip::rand_forestではマルチスレッドでの実行は無効になっています。このため、マルチスレッドでの学習を有効にしたい場合は、parsnip::set_engineにranger::rangerに渡されるnum.threads引数を明示的に指定します。 References "],["summary.html", "Chapter 2 Summary 2.1 データセット 2.2 分析", " Chapter 2 Summary 2.1 データセット ここではAmazonの商品レビューのデータセットを使用し、レビューの内容などをもとに、商品カテゴリを目的変数として分類することを試みます。 dt &lt;- data.table::fread(&quot;https://s3.amazonaws.com/amazon-reviews-pds/tsv/amazon_reviews_multilingual_JP_v1_00.tsv.gz&quot;, quote = &quot;&quot;) このデータは、Amazon Customer Reviews Datasetのうち、日本語のレビューだけを抽出したものです。次の15列からなるデータで、欠損値のある行はありません。 marketplace - 2 letter country code of the marketplace where the review was written. customer_id - Random identifier that can be used to aggregate reviews written by a single author. review_id - The unique ID of the review. product_id - The unique Product ID the review pertains to. In the multilingual dataset the reviews for the same product in different countries can be grouped by the same product_id. product_parent - Random identifier that can be used to aggregate reviews for the same product. product_title - Title of the product. product_category - Broad product category that can be used to group reviews (also used to group the dataset into coherent parts). star_rating - The 1-5 star rating of the review. helpful_votes - Number of helpful votes. total_votes - Number of total votes the review received. vine - Review was written as part of the Vine program. verified_purchase - The review is on a verified purchase. review_headline - The title of the review. review_body - The review text. review_date - The date the review was written. dt |&gt; dplyr::glimpse() ## Rows: 262,431 ## Columns: 15 ## $ marketplace &lt;chr&gt; &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;JP&quot;, &quot;… ## $ customer_id &lt;int&gt; 65317, 65317, 65696, 67162, 67701, 68380, 68655, 68973, 69080, 6955… ## $ review_id &lt;chr&gt; &quot;R33RSUD4ZTRKT7&quot;, &quot;R2U1VB8GPZBBEH&quot;, &quot;R1IBRCJPPGWVJW&quot;, &quot;RL02CW5XLYON… ## $ product_id &lt;chr&gt; &quot;B000001GBJ&quot;, &quot;B000YPWBQ2&quot;, &quot;B0002E5O9G&quot;, &quot;B00004SRJ5&quot;, &quot;B0093H8H8I… ## $ product_parent &lt;int&gt; 957145596, 904244932, 108978277, 606528497, 509738390, 37188049, 91… ## $ product_title &lt;chr&gt; &quot;SONGS FROM A SECRET GARDE&quot;, &quot;鏡の中の鏡‾ペルト作品集(SACD)(Arvo Pa… ## $ product_category &lt;chr&gt; &quot;Music&quot;, &quot;Music&quot;, &quot;Music&quot;, &quot;Music&quot;, &quot;PC&quot;, &quot;Toys&quot;, &quot;Music&quot;, &quot;Electro… ## $ star_rating &lt;int&gt; 1, 1, 5, 5, 4, 4, 5, 1, 5, 4, 3, 4, 5, 5, 5, 5, 5, 4, 4, 5, 5, 5, 5… ## $ helpful_votes &lt;int&gt; 1, 4, 2, 6, 2, 2, 8, 3, 1, 1, 3, 0, 6, 1, 4, 1, 1, 3, 7, 8, 2, 1, 0… ## $ total_votes &lt;int&gt; 15, 20, 3, 9, 4, 3, 13, 15, 2, 4, 6, 0, 9, 2, 6, 1, 1, 8, 14, 23, 4… ## $ vine &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N… ## $ verified_purchase &lt;chr&gt; &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y… ## $ review_headline &lt;chr&gt; &quot;残念ながら…&quot;, &quot;残念ながら…&quot;, &quot;ドリームキャスト&quot;, &quot;やっぱりマスト… ## $ review_body &lt;chr&gt; &quot;残念ながら…趣味ではありませんでした。ケルト音楽の範疇にも幅がある… ## $ review_date &lt;IDate&gt; 2012-12-05, 2012-12-05, 2013-03-02, 2013-08-11, 2013-02-10, 2014-… 2.2 分析 このデータセットには26万2000件ほどのレビューが収録されていますが、レビューのほとんどはVideo DVDカテゴリとMusicカテゴリのものです。その他のカテゴリのレビューをすべて足し合わせても、Musicカテゴリのレビューの数よりも少なく、そもそもレビューが数件しかないようなカテゴリもあります。 また、商品の評価を表す星の数は5を付けているものが過半数であるほか、「このレビューが役に立った」の投票がないものがほとんどになっています。 dt |&gt; dtplyr::lazy_dt(immutable = TRUE) |&gt; dplyr::select(review_id, product_category, star_rating, helpful_votes, total_votes, vine, verified_purchase, review_headline, review_body, review_date) |&gt; dplyr::mutate( product_category = forcats::fct_lump(factor(product_category), n = 2), star_rating = forcats::fct_lump(factor(star_rating), n = 2), vine = factor(vine), verified_purchase = factor(verified_purchase), review_len = nchar(review_body), review_month = factor(lubridate::month(review_date)), review_wday = factor(lubridate::wday(review_date, label = TRUE)) ) |&gt; dplyr::select(!c(review_id, review_headline, review_body, review_date)) |&gt; dplyr::as_tibble() |&gt; DataExplorer::create_report(output_dir = &quot;docs&quot;) report レビュー本文は短いものが多く、比較的よくレビューが書かれている商品カテゴリ以外では、とくに短くなりがちです。 dt |&gt; dtplyr::lazy_dt(immutable = TRUE) |&gt; dplyr::select(review_id, product_category, review_headline, review_body) |&gt; dplyr::mutate( product_category = factor(product_category), review_len = nchar(review_body) ) |&gt; dplyr::filter(review_len &gt; 50, review_len &lt; 2000) |&gt; dplyr::summarise( counts = dplyr::n(), review_len = median(review_len), .by = product_category ) |&gt; dplyr::as_tibble() |&gt; ggplot2::ggplot(ggplot2::aes(x = counts, y = review_len, color = product_category)) + ggplot2::geom_point() + ggrepel::geom_text_repel(ggplot2::aes(label = product_category), max.overlaps = 15) + ggplot2::scale_x_log10() + ggplot2::theme(legend.position = &quot;none&quot;) + ggplot2::scale_colour_viridis_d(option = &quot;turbo&quot;) Figure 2.1: Product reviews and their length 分類を簡単にするために、ここでは使用するデータをある程度の文字数のあるレビューに絞りつつ、Video DVDとMusic以外のカテゴリを一つにまとめることにします。 dt |&gt; dtplyr::lazy_dt(immutable = TRUE) |&gt; dplyr::select(review_id, product_category, review_headline, review_body) |&gt; dplyr::mutate( product_category = forcats::fct_lump(factor(product_category), n = 2), review_len = nchar(review_body) ) |&gt; dplyr::select(product_category, review_len) |&gt; dplyr::as_tibble() |&gt; ggpubr::ggdensity( &quot;review_len&quot;, y = &quot;density&quot;, color = &quot;product_category&quot;, palette = viridisLite::turbo(3) ) |&gt; ggpubr::ggpar(xscale = &quot;log10&quot;) Figure 2.2: Density of review length "],["preprocess.html", "Chapter 3 Preprocessing 3.1 前処理 3.2 形態素解析の結果の確認", " Chapter 3 Preprocessing 3.1 前処理 データセットから10%だけ抽出して使用することにします。ここで一部の前処理もやってしまいます。 レビューのテキストについては、あらかじめ形態素解析をすませてから、スペース区切りのテキストとしてデータセットのなかに差し戻しておきます。tidymodelsの枠組みのなかでやってもよいのですが、形態素解析は文字列を分割する処理としてはわりと重いので、個人的には、学習とセットではやらないほうがよいかなと思います。 corp &lt;- dt |&gt; dtplyr::lazy_dt(immutable = TRUE) |&gt; dplyr::slice_sample(prop = .1) |&gt; dplyr::select( review_id, product_category, verified_purchase, star_rating, helpful_votes, total_votes, review_headline, review_body, review_date ) |&gt; dplyr::mutate( product_category = forcats::fct_lump(factor(product_category), n = 2), verified_purchase = factor(verified_purchase), star_rating = forcats::fct_lump(factor(star_rating), n = 2), review_len = nchar(review_body), review_month = factor(lubridate::month(review_date)), review_wday = factor(lubridate::wday(review_date, label = TRUE)) ) |&gt; dplyr::select(!review_date) |&gt; dplyr::filter(review_len &gt; 50, review_len &lt; 2000) |&gt; dplyr::as_tibble() ここではMeCab+IPA辞書で解析し、品詞が「助詞・助動詞・記号」である語と、品詞細分類1が「非自立」である語を取り除きます。 corp &lt;- corp |&gt; dplyr::select(review_id, review_headline, review_body) |&gt; dplyr::mutate(chunk_id = dplyr::ntile(dplyr::row_number(), 10)) |&gt; dplyr::group_by(chunk_id) |&gt; dplyr::group_map(\\(df, grp) { df |&gt; dplyr::mutate( review_body = stringi::stri_c(review_headline, review_body, sep = &quot;\\n\\n&quot;) |&gt; stringi::stri_replace_all_regex(&quot;(&lt;br /&gt;)&quot;, &quot;\\n\\n&quot;) |&gt; audubon::strj_normalize() |&gt; stringi::stri_trim_both() |&gt; stringi::stri_replace_all_regex(&quot;[\\\\d]+&quot;, &quot;0&quot;) ) |&gt; dplyr::select(review_id, review_body) |&gt; gibasa::tokenize(review_body, review_id) |&gt; dplyr::filter(!gibasa::is_blank(token)) |&gt; gibasa::prettify(col_select = c(&quot;POS1&quot;, &quot;POS2&quot;, &quot;Original&quot;)) |&gt; dplyr::mutate(token = dplyr::if_else(is.na(Original), token, Original)) |&gt; dplyr::add_count(doc_id, token) |&gt; gibasa::mute_tokens(POS1 %in% c(&quot;助詞&quot;, &quot;助動詞&quot;, &quot;記号&quot;)) |&gt; gibasa::mute_tokens(POS2 == &quot;非自立&quot;) |&gt; gibasa::pack() }) |&gt; purrr::list_rbind() |&gt; dplyr::left_join( corp |&gt; dplyr::select( review_id, product_category, verified_purchase, star_rating, helpful_votes, total_votes, review_len, review_month, review_wday ), by = c(&quot;doc_id&quot; = &quot;review_id&quot;) ) |&gt; dplyr::as_tibble() 3.2 形態素解析の結果の確認 後でtextrecipes::step_tokenfilterを使って語彙を減らすので、この段階で大体の語彙数を確認します。rsample::initial_splitはとくに何も指定しないと75%を訓練データにするので、コーパス全体の75%くらいについて、語彙数を確認しておきます。 corp |&gt; quanteda::corpus() %&gt;% quanteda::corpus_sample(x = ., size = floor(quanteda::ndoc(.) * .75)) |&gt; quanteda::tokens(what = &quot;fastestword&quot;) |&gt; quanteda::dfm() |&gt; quanteda::dfm_trim(min_termfreq = 100) |&gt; quanteda::nfeat() ## [1] 1901 corp |&gt; quanteda::corpus() %&gt;% quanteda::corpus_sample(x = ., size = floor(quanteda::ndoc(.) * .75)) |&gt; quanteda::tokens(what = &quot;fastestword&quot;) |&gt; quanteda::dfm() |&gt; quanteda::dfm_trim(min_termfreq = 100) |&gt; quanteda.textstats::textstat_frequency( n = 20L, groups = product_category, force = TRUE ) |&gt; ggpubr::ggdotchart( x = &quot;feature&quot;, y = &quot;frequency&quot;, group = &quot;group&quot;, color = &quot;group&quot;, palette = viridisLite::turbo(3), add = &quot;segment&quot;, rotate = TRUE ) + ggplot2::theme_bw() Figure 3.1: Frequent words in each category "],["modeling.html", "Chapter 4 Modeling 4.1 ワークフローの作成 4.2 ハイパーパラメータの探索 4.3 モデルの評価", " Chapter 4 Modeling 4.1 ワークフローの作成 ランダムフォレストのモデルを作成します。はじめに、モデルの学習に使うデータセットを分割します。 corp_split &lt;- initial_split(dplyr::select(corp, !doc_id), strata = product_category) corp_train &lt;- training(corp_split) corp_test &lt;- testing(corp_split) ワークフローを作成します。 先ほど形態素解析の結果について確認したとき、「映画」という語がコーパス全体の75%で1万回出ないくらいでしたが、これは特徴量として拾ってほしいので、textrecipes::step_tokenfilterのmax_timesは1e4とします。 また、コーパス全体の75%で語彙数が2000まではいかないくらいだったので、max_tokensはとりあえず300にしておきます。 ranger_spec &lt;- parsnip::rand_forest( mtry = tune::tune(), trees = 300L, min_n = 5L ) |&gt; parsnip::set_engine( &quot;ranger&quot;, importance = &quot;impurity&quot;, num.threads = max(1, parallel::detectCores() - 1, na.rm = TRUE) ) |&gt; parsnip::set_mode(&quot;classification&quot;) tfidf_rec &lt;- recipes::recipe(product_category ~ ., data = corp_train) |&gt; recipes::step_YeoJohnson(all_numeric_predictors()) |&gt; themis::step_downsample(product_category, under_ratio = 2) |&gt; textrecipes::step_tokenize(text, custom_token = \\(x) { strsplit(x, &quot; &quot;, fixed = TRUE) }) |&gt; textrecipes::step_tokenfilter(text, min_times = 100, max_times = 1e4, max_tokens = 300) |&gt; textrecipes::step_tfidf(text, sublinear_tf = TRUE) corp_wflow &lt;- workflows::workflow() |&gt; workflows::add_model(ranger_spec) |&gt; workflows::add_recipe(tfidf_rec) 4.2 ハイパーパラメータの探索 mtryについて、3分割CVで探索します。 ranger_tfidf_grid &lt;- corp_wflow |&gt; tune::tune_grid( resamples = rsample::vfold_cv(corp_train, strata = product_category, v = 3L), grid = dials::grid_latin_hypercube( list( dials::finalize( dials::mtry(), tfidf_rec |&gt; prep() |&gt; bake(new_data = NULL) |&gt; dplyr::select(!product_category) )) |&gt; dials::parameters(), size = 5L ), metrics = yardstick::metric_set(yardstick::f_meas), control = tune::control_grid(save_pred = TRUE) ) autoplot(ranger_tfidf_grid) 4.3 モデルの評価 last_fitして、F値を確認します。 corp_wflow_best &lt;- finalize_workflow(corp_wflow, select_best(ranger_tfidf_grid)) corp_last_fit &lt;- last_fit(corp_wflow_best, corp_split, metrics = metric_set(f_meas)) collect_metrics(corp_last_fit) ## # A tibble: 1 × 4 ## .metric .estimator .estimate .config ## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 f_meas macro 0.875 Preprocessor1_Model1 混同行列を見ると、OtherをVideo DVDと誤分類している例がやや多いように見えます。 collect_predictions(corp_last_fit) |&gt; conf_mat(product_category, .pred_class) |&gt; autoplot(type = &quot;heatmap&quot;) Figure 4.1: Confusion matrix 変数重要度がとくに大きい特徴量を見てみると、Video DVDやMusicと同定するのに効いていそうな語彙が並んでいることがわかります。 corp_last_fit |&gt; extract_fit_parsnip() |&gt; (\\(x){ x$fit$variable.importance })() |&gt; tibble::enframe() |&gt; dplyr::slice_max(value, n = 25) |&gt; ggpubr::ggdotchart(x = &quot;name&quot;, y = &quot;value&quot;, rotate = TRUE, sorting = &quot;descending&quot;, add = &quot;segment&quot;, xlab = &quot;feature&quot;, ylab = &quot;importance&quot;) Figure 4.2: Variable importance OtherでVideo DVDと誤分類されている商品レビューは、どのようなレビューなのでしょうか。 サンプリングする前の元のデータセットから先頭2000行を取ってきて、学習したモデルでカテゴリを予測させてみて、同様に誤分類されたケースを確認してみます。 predict(extract_fit_parsnip(corp_last_fit), extract_preprocessor(corp_last_fit) |&gt; prep() |&gt; bake(new_data = dplyr::slice_head(corp, n = 2000) |&gt; dplyr::select(!doc_id))) |&gt; dplyr::bind_cols( dplyr::slice_head(corp, n = 2000) |&gt; dplyr::select(doc_id, product_category, text)) |&gt; dplyr::filter(product_category == &quot;Other&quot; &amp; .pred_class == &quot;Video DVD&quot;) |&gt; dplyr::inner_join( dtplyr::lazy_dt(dt) |&gt; dplyr::select(review_id, product_category) |&gt; dplyr::rename(truth_category = product_category) |&gt; dplyr::as_tibble(), by = c(&quot;doc_id&quot; = &quot;review_id&quot;) ) |&gt; dplyr::mutate(text = stringr::str_sub(text, end = 30)) |&gt; reactable::reactable(filterable = TRUE, compact = TRUE) BooksやVideo、Digital_Video_Downloadといったカテゴリの商品が多いようです。 "],["dmr.html", "Chapter 5 DMR 5.1 DMR（distributed multinomial regression）", " Chapter 5 DMR 予測そのものよりも、ようするに変数重要度を確認したいというのが主な目的の場合（いわゆる「架空の予測問題」を解く場合）、「DMR（distributed multinomial regression）」という手法が便利かもしれません。 5.1 DMR（distributed multinomial regression） DMR（distributed multinomial regression）は、Taddy (2015) で提案された手法で、雑に言うと多項ロジスティック回帰を高次元のデータでも速くできるようにしたものです。distromというRパッケージから使えます。 DMRはたとえば次のようにして実行します。product_categoryについては順序がないので、ここではダミー変数化しています。 mat &lt;- corp_train |&gt; quanteda::corpus() %&gt;% quanteda::tokens(what = &quot;fastestword&quot;) |&gt; quanteda::dfm() |&gt; quanteda::dfm_trim(min_termfreq = 100, max_termfreq = 1e4) |&gt; quanteda::dfm_tfidf() |&gt; as(&quot;dgCMatrix&quot;) covars &lt;- corp_train |&gt; dplyr::select(product_category, star_rating) |&gt; dplyr::transmute( pc_video_dvd = dplyr::if_else(product_category == &quot;Video DVD&quot;, 1, 0), pc_music = dplyr::if_else(product_category == &quot;Music&quot;, 1, 0), pc_other = dplyr::if_else(product_category == &quot;Other&quot;, 1, 0), star_rating = as.integer(star_rating) ) |&gt; as.matrix() |&gt; as(&quot;dgCMatrix&quot;) cl &lt;- parallel::makeCluster( max(1, parallel::detectCores() - 1, na.rm = TRUE) ) ret &lt;- distrom::dmr( cl, covars = covars, counts = mat ) parallel::stopCluster(cl) coefficientsが大きい特徴量を確認します。 coef(ret)[&quot;pc_video_dvd&quot;,] |&gt; sort(decreasing = TRUE) |&gt; head(50) ## 声優 ターミネーター 上映 宮崎 吹き替え 監督 ## 4.531380 3.853567 3.516524 3.371827 3.221108 3.103991 ## キャスト 演技 役者 劇場 娯楽 cg ## 2.877815 2.752172 2.702536 2.689291 2.685808 2.653322 ## ラストシーン 観る リアリティ シーズン アカデミー 俳優 ## 2.629915 2.593171 2.582959 2.579233 2.567552 2.539110 ## 脚本 特典 見所 シーン 役 公開 ## 2.459971 2.459964 2.395294 2.330210 2.316472 2.265206 ## 正義 スピルバーグ 放映 館 blu レイ ## 2.257692 2.247745 2.216671 2.216081 2.212462 2.203985 ## ブルー 演じる 吹替 復讐 台詞 ヒーロー ## 2.180158 2.177377 2.159551 2.138070 2.126201 2.119079 ## アニメ 戦い ヒロイン 刑事 戦闘 出演 ## 2.116731 2.106475 2.102385 2.065506 2.058139 2.032843 ## バットマン サスペンス ホームズ 女優 戦争 悪役 ## 2.021464 1.966226 1.959172 1.956910 1.956398 1.918113 ## 恐怖 リメイク ## 1.916225 1.911121 coef(ret)[&quot;pc_music&quot;,] |&gt; sort(decreasing = TRUE) |&gt; head(50) ## sacd ビート アコースティック アルバム リフ ## 5.564642 5.460718 4.694369 4.549915 4.387598 ## lp ロックンロール 曲調 パンク ヴォーカル ## 4.347881 4.296106 4.274276 4.227198 4.200279 ## 必聴 スラッシュ vo リスナー マイルス ## 4.173485 4.030557 4.028758 3.973202 3.972505 ## バラード メタル ギター ソロ ストーンズ ## 3.840403 3.766170 3.761472 3.700822 3.517525 ## 全曲 ボーカル レコーディング メロディ st ## 3.487658 3.474896 3.461134 3.441243 3.390878 ## nd ポップ 曲 楽曲 プロデュース ## 3.386917 3.316588 3.303455 3.274317 3.252896 ## 聴く ギタリスト 楽器 ドラム メロディー ## 3.252538 3.170178 3.167700 3.158917 3.147558 ## シングル バンド キャッチー クラプトン モノラル ## 3.107950 3.105368 3.105220 3.091808 3.070800 ## 脱退 rd カントリー ビートルズ ロック ## 3.049162 3.015861 3.001146 2.993426 2.980474 ## 聴ける ジャケ rock ジャズ レコード ## 2.961248 2.952392 2.950065 2.934386 2.841200 coef(ret)[&quot;pc_other&quot;,] |&gt; sort(decreasing = TRUE) |&gt; head(50) ## kindle atilde ;&amp;# アプリ 充電 純正 レンズ ## 6.335462 6.290259 6.001140 5.752085 5.309685 5.054201 5.015425 ## usb バッテリー 接続 著者 ;&amp; インストール book ## 4.917993 4.402027 4.238265 4.172025 4.164973 4.081835 3.943654 ## 動作 本体 ケーブル パーツ 使える 冊 電源 ## 3.942407 3.837859 3.825347 3.705331 3.689106 3.666314 3.598223 ## 便利 ボタン 無料 機能 遊ぶ ページ サイズ ## 3.471980 3.182765 2.996116 2.937164 2.794061 2.704640 2.626639 ## pc 文章 使用 操作 交換 製品 絵本 ## 2.607167 2.590672 2.539638 2.538409 2.497666 2.463607 2.419834 ## 付属 書 用 was 試す データ 読む ## 2.312074 2.310120 2.306234 2.281336 2.270339 2.258409 2.117860 ## story 表示 貼る as 式 台 have ## 2.100581 2.070926 2.042347 2.039030 1.963620 1.926075 1.904731 ## ヶ月 ## 1.885448 coef(ret)[&quot;star_rating&quot;,] |&gt; sort(decreasing = TRUE) |&gt; head(50) ## 最低 駄作 酷い がっかり ひどい 中途半端 ## 1.5704273 1.4536477 1.3218056 1.2388505 1.1423510 1.1070474 ## 最悪 つまらない ゴジラ インストール 退屈 _ ## 0.9933692 0.9549500 0.9522552 0.9316276 0.8597217 0.8538243 ## ダメ 肝心 イマイチ やめる 声優 メーカー ## 0.8022930 0.7714719 0.7467446 0.7001536 0.6878111 0.6873070 ## 欠ける いまいち 無駄 ボンド 不足 怪獣 ## 0.6761385 0.6724465 0.6678372 0.6668025 0.6607413 0.6592544 ## 微妙 失敗 吹替 マニア 売る コピー ## 0.6588799 0.6377653 0.6340494 0.6307099 0.5852692 0.5724463 ## アマゾン 残念 傷 貼る 試す お金 ## 0.5501947 0.5305893 0.5297553 0.5179530 0.5148472 0.5076761 ## 結局 悪い 販売 全く なんで 旧 ## 0.5021539 0.4981619 0.4887589 0.4814328 0.4812368 0.4792993 ## 安っぽい 移入 二つ すぎる ターミネーター kindle ## 0.4639137 0.4625728 0.4496884 0.4471619 0.4448238 0.4392495 ## 届く それなり ## 0.4369202 0.4345080 References "],["session.html", "Sessioninfo", " Sessioninfo sessioninfo::session_info() ## ─ Session info ────────────────────────────────────────────────────────────────────────────── ## setting value ## version R version 4.2.2 Patched (2022-11-10 r83330) ## os Ubuntu 22.04.2 LTS ## system x86_64, linux-gnu ## ui RStudio ## language (EN) ## collate ja_JP.UTF-8 ## ctype ja_JP.UTF-8 ## tz Asia/Tokyo ## date 2023-03-12 ## rstudio 2022.12.0+353 Elsbeth Geranium (server) ## pandoc 2.19.2 @ /usr/lib/rstudio-server/bin/quarto/bin/tools/ (via rmarkdown) ## ## ─ Packages ────────────────────────────────────────────────────────────────────────────────── ## package * version date (UTC) lib source ## abind 1.4-5 2016-07-21 [3] CRAN (R 4.0.1) ## audubon 0.5.0 2023-02-26 [1] https://paithiov909.r-universe.dev (R 4.2.2) ## backports 1.4.1 2021-12-13 [3] RSPM (R 4.2.0) ## bit 4.0.5 2022-11-15 [3] RSPM (R 4.2.0) ## bit64 4.0.5 2020-08-30 [3] RSPM (R 4.2.0) ## bookdown 0.33 2023-03-06 [1] RSPM (R 4.2.0) ## broom * 1.0.3 2023-01-25 [3] RSPM (R 4.2.0) ## bslib 0.4.2 2022-12-16 [3] RSPM (R 4.2.0) ## cachem 1.0.7 2023-02-24 [3] RSPM (R 4.2.0) ## car 3.1-1 2022-10-19 [1] RSPM (R 4.2.0) ## carData 3.0-5 2022-01-06 [1] RSPM (R 4.2.0) ## class 7.3-21 2023-01-23 [3] RSPM (R 4.2.0) ## cli 3.6.0 2023-01-09 [3] RSPM (R 4.2.0) ## codetools 0.2-19 2023-02-01 [3] RSPM (R 4.2.0) ## colorspace 2.1-0 2023-01-23 [3] RSPM (R 4.2.0) ## conflicted 1.2.0 2023-02-01 [1] RSPM (R 4.2.0) ## crayon 1.5.2 2022-09-29 [3] RSPM (R 4.2.0) ## crosstalk 1.2.0 2021-11-04 [3] CRAN (R 4.1.2) ## curl 5.0.0 2023-01-12 [3] RSPM (R 4.2.0) ## data.table 1.14.8 2023-02-17 [3] RSPM (R 4.2.0) ## dials * 1.1.0 2022-11-04 [1] RSPM (R 4.2.0) ## DiceDesign 1.9 2021-02-13 [1] RSPM (R 4.2.0) ## digest 0.6.31 2022-12-11 [3] RSPM (R 4.2.0) ## distrom 1.0.1 2022-03-29 [1] RSPM (R 4.2.0) ## dplyr * 1.1.0 2023-01-29 [3] RSPM (R 4.2.0) ## dtplyr 1.3.0 2023-02-24 [1] CRAN (R 4.2.2) ## ellipsis 0.3.2 2021-04-29 [3] CRAN (R 4.1.1) ## evaluate 0.20 2023-01-17 [3] RSPM (R 4.2.0) ## fansi 1.0.4 2023-01-22 [3] RSPM (R 4.2.0) ## farver 2.1.1 2022-07-06 [3] RSPM (R 4.2.0) ## fastmap 1.1.1 2023-02-24 [3] RSPM (R 4.2.0) ## fastmatch 1.1-3 2021-07-23 [3] RSPM (R 4.2.0) ## forcats 1.0.0 2023-01-29 [1] RSPM (R 4.2.0) ## foreach 1.5.2 2022-02-02 [3] RSPM (R 4.2.0) ## furrr 0.3.1 2022-08-15 [3] RSPM (R 4.2.0) ## future 1.31.0 2023-02-01 [3] RSPM (R 4.2.0) ## future.apply 1.10.0 2022-11-05 [3] RSPM (R 4.2.0) ## gamlr 1.13-7 2021-05-07 [1] RSPM (R 4.2.0) ## generics 0.1.3 2022-07-05 [3] RSPM (R 4.2.0) ## ggplot2 * 3.4.1 2023-02-10 [3] RSPM (R 4.2.0) ## ggpubr 0.6.0 2023-02-10 [1] CRAN (R 4.2.2) ## ggrepel 0.9.3 2023-02-03 [1] CRAN (R 4.2.2) ## ggsignif 0.6.4 2022-10-13 [1] RSPM (R 4.2.0) ## gibasa 0.8.0 2023-03-04 [1] https://paithiov909.r-universe.dev (R 4.2.2) ## globals 0.16.2 2022-11-21 [3] RSPM (R 4.2.0) ## glue 1.6.2 2022-02-24 [3] RSPM (R 4.2.0) ## gower 1.0.1 2022-12-22 [3] RSPM (R 4.2.0) ## GPfit 1.0-8 2019-02-08 [1] RSPM (R 4.2.0) ## gtable 0.3.1 2022-09-01 [3] RSPM (R 4.2.0) ## hardhat 1.2.0 2022-06-30 [3] RSPM (R 4.2.0) ## highr 0.10 2022-12-22 [3] RSPM (R 4.2.0) ## hms 1.1.2 2022-08-19 [3] RSPM (R 4.2.0) ## htmltools 0.5.4 2022-12-07 [3] RSPM (R 4.2.0) ## htmlwidgets 1.6.1 2023-01-07 [3] RSPM (R 4.2.0) ## httpgd 1.3.1 2023-01-30 [3] RSPM (R 4.2.0) ## infer * 1.0.4 2022-12-02 [1] RSPM (R 4.2.0) ## ipred 0.9-13 2022-06-02 [3] RSPM (R 4.2.0) ## iterators 1.0.14 2022-02-05 [3] RSPM (R 4.2.0) ## jquerylib 0.1.4 2021-04-26 [3] CRAN (R 4.1.2) ## jsonlite 1.8.4 2022-12-06 [3] RSPM (R 4.2.0) ## knitr 1.42 2023-01-25 [3] RSPM (R 4.2.0) ## labeling 0.4.2 2020-10-20 [3] RSPM (R 4.2.0) ## later 1.3.0 2021-08-18 [3] CRAN (R 4.1.1) ## lattice 0.20-45 2021-09-22 [4] CRAN (R 4.2.0) ## lava 1.7.2.1 2023-02-27 [3] RSPM (R 4.2.0) ## lhs 1.1.6 2022-12-17 [1] RSPM (R 4.2.0) ## lifecycle 1.0.3 2022-10-07 [3] RSPM (R 4.2.0) ## listenv 0.9.0 2022-12-16 [3] RSPM (R 4.2.0) ## lubridate 1.9.2 2023-02-10 [3] RSPM (R 4.2.0) ## magrittr 2.0.3 2022-03-30 [3] RSPM (R 4.2.0) ## MASS 7.3-58.2 2023-01-23 [3] RSPM (R 4.2.0) ## Matrix 1.5-3 2022-11-11 [3] RSPM (R 4.2.0) ## memoise 2.0.1 2021-11-26 [3] RSPM (R 4.2.0) ## modeldata * 1.1.0 2023-01-25 [3] RSPM (R 4.2.0) ## munsell 0.5.0 2018-06-12 [3] CRAN (R 4.0.1) ## nnet 7.3-18 2022-09-28 [3] RSPM (R 4.2.0) ## nsyllable 1.0.1 2022-02-28 [1] RSPM (R 4.2.0) ## parallelly 1.34.0 2023-01-13 [3] RSPM (R 4.2.0) ## parsnip * 1.0.4 2023-02-22 [1] CRAN (R 4.2.2) ## pillar 1.8.1 2022-08-19 [3] RSPM (R 4.2.0) ## pkgconfig 2.0.3 2019-09-22 [3] CRAN (R 4.0.1) ## prodlim 2019.11.13 2019-11-17 [3] RSPM (R 4.2.0) ## purrr * 1.0.1 2023-01-10 [3] RSPM (R 4.2.0) ## quanteda 3.2.4 2022-12-08 [1] RSPM (R 4.2.0) ## quanteda.textstats 0.96.1 2023-03-08 [1] RSPM (R 4.2.0) ## R.methodsS3 1.8.2 2022-06-13 [3] RSPM (R 4.2.0) ## R.oo 1.25.0 2022-06-12 [3] RSPM (R 4.2.0) ## R.utils 2.12.2 2022-11-11 [3] RSPM (R 4.2.0) ## R6 2.5.1 2021-08-19 [3] RSPM (R 4.2.0) ## ranger * 0.14.1 2022-06-18 [1] RSPM (R 4.2.0) ## Rcpp 1.0.10 2023-01-22 [3] RSPM (R 4.2.0) ## RcppParallel 5.1.7 2023-02-27 [1] CRAN (R 4.2.2) ## reactable 0.4.3 2023-01-07 [1] RSPM (R 4.2.0) ## reactR 0.4.4 2021-02-22 [1] RSPM (R 4.2.0) ## readr 2.1.4 2023-02-10 [1] CRAN (R 4.2.2) ## recipes * 1.0.5 2023-02-20 [3] RSPM (R 4.2.0) ## rlang 1.0.6 2022-09-24 [3] RSPM (R 4.2.0) ## rmarkdown 2.20 2023-01-19 [3] RSPM (R 4.2.0) ## ROSE 0.0-4 2021-06-14 [1] RSPM (R 4.2.0) ## rpart 4.1.19 2022-10-21 [3] RSPM (R 4.2.0) ## rsample * 1.1.1 2022-12-07 [3] RSPM (R 4.2.0) ## rstatix 0.7.2 2023-02-01 [1] RSPM (R 4.2.0) ## rstudioapi 0.14 2022-08-22 [3] RSPM (R 4.2.0) ## sass 0.4.5 2023-01-24 [3] RSPM (R 4.2.0) ## scales * 1.2.1 2022-08-20 [3] RSPM (R 4.2.0) ## sessioninfo 1.2.2 2021-12-06 [1] RSPM (R 4.2.0) ## stopwords 2.3 2021-10-28 [1] RSPM (R 4.2.0) ## stringi 1.7.12 2023-01-11 [3] RSPM (R 4.2.0) ## stringr 1.5.0 2022-12-02 [3] RSPM (R 4.2.0) ## survival 3.5-3 2023-02-12 [3] RSPM (R 4.2.0) ## systemfonts 1.0.4 2022-02-11 [3] RSPM (R 4.2.0) ## textrecipes * 1.0.2 2022-12-21 [1] RSPM (R 4.2.0) ## themis * 1.0.0 2022-07-02 [1] RSPM (R 4.2.0) ## tibble * 3.1.8 2022-07-22 [3] RSPM (R 4.2.0) ## tidymodels * 1.0.0 2022-07-13 [1] RSPM (R 4.2.0) ## tidyr * 1.3.0 2023-01-24 [3] RSPM (R 4.2.0) ## tidyselect 1.2.0 2022-10-10 [3] RSPM (R 4.2.0) ## timechange 0.2.0 2023-01-11 [3] RSPM (R 4.2.0) ## timeDate 4022.108 2023-01-07 [3] RSPM (R 4.2.0) ## tune * 1.0.1 2022-10-09 [1] RSPM (R 4.2.0) ## tzdb 0.3.0 2022-03-28 [3] RSPM (R 4.2.0) ## utf8 1.2.3 2023-01-31 [3] RSPM (R 4.2.0) ## V8 4.2.2 2022-11-03 [3] RSPM (R 4.2.0) ## vctrs 0.5.2 2023-01-23 [3] RSPM (R 4.2.0) ## viridisLite 0.4.1 2022-08-22 [3] RSPM (R 4.2.0) ## vroom 1.6.1 2023-01-22 [1] RSPM (R 4.2.0) ## withr 2.5.0 2022-03-03 [3] RSPM (R 4.2.0) ## workflows * 1.1.3 2023-02-22 [1] CRAN (R 4.2.2) ## workflowsets * 1.0.0 2022-07-12 [1] RSPM (R 4.2.0) ## xfun 0.37 2023-01-31 [3] RSPM (R 4.2.0) ## yaml 2.3.7 2023-01-23 [3] RSPM (R 4.2.0) ## yardstick * 1.1.0 2022-09-07 [1] RSPM (R 4.2.0) ## ## [1] /home/paithiov909/R/x86_64-pc-linux-gnu-library/4.2 ## [2] /usr/local/lib/R/site-library ## [3] /usr/lib/R/site-library ## [4] /usr/lib/R/library ## ## ───────────────────────────────────────────────────────────────────────────────────────────── "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
